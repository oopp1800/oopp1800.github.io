<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>惯例的第一篇：搭建博客，从申请域名到撰写博文 | 脑袋的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">惯例的第一篇：搭建博客，从申请域名到撰写博文</h1><a id="logo" href="/.">脑袋的博客</a><p class="description">BrainBag's Blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">惯例的第一篇：搭建博客，从申请域名到撰写博文</h1><div class="post-meta">May 10, 2018<span> | </span><span class="category"><a href="/categories/技术/">技术</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#建立博客项目"><span class="toc-number">1.</span> <span class="toc-text">建立博客项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#初始化博客"><span class="toc-number">1.1.</span> <span class="toc-text">初始化博客</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置主题"><span class="toc-number">1.2.</span> <span class="toc-text">设置主题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成「关于」页和「订阅」页"><span class="toc-number">1.3.</span> <span class="toc-text">生成「关于」页和「订阅」页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置-favicon"><span class="toc-number">1.4.</span> <span class="toc-text">设置 favicon</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#传到-GitHub-Pages"><span class="toc-number">2.</span> <span class="toc-text">传到 GitHub Pages</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#个人域名"><span class="toc-number">3.</span> <span class="toc-text">个人域名</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#域名申请"><span class="toc-number">3.1.</span> <span class="toc-text">域名申请</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关联到-GitHub-Pages"><span class="toc-number">3.2.</span> <span class="toc-text">关联到 GitHub Pages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置-HTTPS"><span class="toc-number">3.3.</span> <span class="toc-text">设置 HTTPS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#撰写博文"><span class="toc-number">4.</span> <span class="toc-text">撰写博文</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#评论系统"><span class="toc-number">5.</span> <span class="toc-text">评论系统</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#多设备同步"><span class="toc-number">6.</span> <span class="toc-text">多设备同步</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#后记"><span class="toc-number">7.</span> <span class="toc-text">后记</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#版本记录"><span class="toc-number">8.</span> <span class="toc-text">版本记录</span></a></li></ol></div></div><div class="post-content"><p>眼看着半只脚要踏入前端工程师的坑了，正好去年申请的域名过期了，纠结了一阵还是申请了一个新域名（我的这个手啊，怎么就不听使唤呢</p>
<p>域名能干嘛？最最最基础的就是搭个博客了，但又不想再花钱搞个服务器，想到之前在同学博客（强势推广一波→<strong><a href="http://jcf94.com" target="_blank" rel="noopener">jcf94.com</a></strong>）上看到的 Hexo 好像不错，那就造起来！</p>
<p>搭完博客后总得写点啥吧，苦苦思索数日，实在是肚里没货，那就也来一篇搭建博客的过程好了，权当记录，如果您搭建博客的过程中刚好路过这里又有兴趣阅读下去的话真真是非常感谢了！</p>
<h1 id="建立博客项目"><a href="#建立博客项目" class="headerlink" title="建立博客项目"></a>建立博客项目</h1><h2 id="初始化博客"><a href="#初始化博客" class="headerlink" title="初始化博客"></a>初始化博客</h2><p>首先去 <a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">Hexo 官网</a> 瞅一眼怎么安装，嗨呀，这中文看着怎么就那么爽！</p>
<p>因为我本地就有 <a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> 和 <a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a> 环境了，所以直接走下一步——<br>（没有的同学可以去 Hexo 官网看看教程，或者直接下载安装就行）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 hexo 脚手架</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> npm 是 node.js 用的包管理器</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这句话意思就是「在全局安装 hexo-cli」程序</span></span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<blockquote>
<p>脚手架可以认为是帮助我们进行生成基础代码的工具。</p>
</blockquote>
<p>拿着这个脚手架就可以搭建 Hexo 博客了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 用脚手架初始化博客的代码</span></span><br><span class="line">hexo init &lt;博客项目名字&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入到博客项目文件夹</span></span><br><span class="line">cd &lt;博客项目名字&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装相关依赖项</span></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>等上几分钟……铛！博客就建好了！</p>
<p>顺手再进 _config.yml 文件进行一些博客设置，官网有 <a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">详细的说明</a>，照着改就可以了~<br>运行下服务器：</p>
<figure class="highlight shell"><figcaption><span>博客根目录</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在本地运行 hexo 的博客服务器</span></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>然后浏览器打开 <code>http://localhost:4000</code>——</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180513195136.png" alt="初生的博客"></p>
<p>博客就搭建完成了！好了这篇文章就到……才不！折腾是无极限的！</p>
<p>这么丑的博客是没有资格当我的博客的（赶紧先给这个主题的作者认个错）！不设置个主题怎么行？</p>
<h2 id="设置主题"><a href="#设置主题" class="headerlink" title="设置主题"></a>设置主题</h2><p>Hexo 官网提供了一个<a href="https://hexo.io/themes/" target="_blank" rel="noopener">主题列表</a>，我 <del>在里面逛了半个小时后</del> 选中了一款 <a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">Maupassant</a> 主题，根据文档走起：</p>
<figure class="highlight shell"><figcaption><span>博客根目录</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 把主题下载到 ./themes/maupassant 里</span></span><br><span class="line">git clone https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装主题的一些依赖，不同主题可能有所不同</span></span><br><span class="line">npm install hexo-renderer-pug</span><br><span class="line">npm install hexo-renderer-sass</span><br></pre></td></tr></table></figure>
<p>然后进 _config.yml 设置下主题：</p>
<figure class="highlight yaml"><figcaption><span>/_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">maupassant</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>安装不同主题所要执行的命令可能不同，具体参照各个主题的官网说明，大体步骤为 1. 下载主题；2. 设置主题。<br>有一款 <a href="https://theme-next.iissnan.com/" target="_blank" rel="noopener">Next</a> 主题好像很多人都在用，这里也推荐下~</p>
</blockquote>
<p>重新启动下 hexo 服务器，刷新页面，歘（chuā），页面就不一样了！</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180513201913.png" alt="安装主题后的博客"></p>
<p>主题就安装完成了！好了这篇文章就到……才不！折腾是无极限的！</p>
<p>随手戳戳页面，嗯？怎么<a href="http://localhost:4000/about/" target="_blank" rel="noopener">「关于」</a>和<a href="http://localhost:4000/atom.xml" target="_blank" rel="noopener">「订阅」</a>页面都是空的？</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180513202441.png" alt="空白的订阅页"></p>
<p>不行，得造起来！</p>
<blockquote>
<p>其实也可以关掉这两个页面，页面的控制是归主题管的，在 themes/&lt;对应主题文件夹&gt;/_config.yml 中找到 menu 设置就可以增删不用的页面了。<br>当然，各个主题也可能有不同的设置，具体的还是要去主题官网看，或者研究研究 _config 文件。</p>
</blockquote>
<h2 id="生成「关于」页和「订阅」页"><a href="#生成「关于」页和「订阅」页" class="headerlink" title="生成「关于」页和「订阅」页"></a>生成「关于」页和「订阅」页</h2><p>可以在 maupassant 的 _config.yml 中看到：</p>
<figure class="highlight yaml"><figcaption><span>/themes/maupassant/_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">page:</span> <span class="string">about</span></span><br><span class="line"><span class="attr">directory:</span> <span class="string">about/</span></span><br></pre></td></tr></table></figure>
<p>所以，「关于」页面是一个 <code>page</code>，对应目录为 about/，所以可以用生成页面的方式生成它：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 用 hexo 生成名为 <span class="string">"about"</span> 的 <span class="string">"page"</span> 类型页面</span></span><br><span class="line">hexo new page "about"</span><br></pre></td></tr></table></figure>
<blockquote>
<p>好吧，其实我是网上找的方法啦。</p>
</blockquote>
<p>执行完后就可以看到 source 文件夹下生成了 about 文件夹，里面有一个 index.md 文件，是用 Markdown 格式编写的，之后在 <a href="#撰写博文">撰写博文</a> 一节还会提到。</p>
<p>这里先往里面随便填一点东西：</p>
<figure class="highlight markdown"><figcaption><span>/source/about/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">个人信息</span><br><span class="line">---</span><br><span class="line">姓名：脑袋</span><br><span class="line">英文名：Brain Bag</span><br></pre></td></tr></table></figure>
<p>再戳一下「关于」页面——啾！页面已经可以访问啦！</p>
<p>那么「订阅」页也……并没有好！这两个页面的作用是不一样的，不能按照同样的方式生成。<br>订阅页是用于别人 <a href="https://zh.wikipedia.org/zh/RSS" target="_blank" rel="noopener">RSS 订阅</a> 博客内容用的。虽然我的博客没啥内容吧，但这些花架式一定要先摆好，万一火了呢（不存在的！</p>
<p>Hexo 已经提供了订阅页的生成工具 <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a>，还是一样跟着文档来：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed</span><br></pre></td></tr></table></figure>
<p>然后编辑一下根目录的（不是主题目录） _config.yml 文件：</p>
<figure class="highlight yaml"><figcaption><span>/_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugin:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo-generator-feed</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RSS 订阅 - by hexo-generator-feed</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">atom</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">atom.xml</span></span><br><span class="line"><span class="attr">  limit:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>
<p>重启下 hexo 服务器，再点一下「订阅」，可以看到 RSS 已经生成好了，完美！</p>
<p>主要页面就生成完毕了！</p>
<p>但是往上一看，浏览器顶端的页面小图标还是默认的空白——</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180513205950.png" alt="空白的favicon"></p>
<p>这怎么可以，赶紧造起来！</p>
<h2 id="设置-favicon"><a href="#设置-favicon" class="headerlink" title="设置 favicon"></a>设置 favicon</h2><p>这个图标被称为 favicon，具体的作用和设计规则这里有一篇非常好的文章：<a href="https://www.uisdc.com/design-perfect-favicon-icon" target="_blank" rel="noopener">设计小测试！教你制作完美的Favicon图标(附神器)</a>，文章提到的 <a href="https://realfavicongenerator.net/" target="_blank" rel="noopener">favicon 制作网站</a>先记上，先把图标画出来。作为半个前端做个图标还不是信手拈来，看我掏出 p…pt 随手一画——</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180513210754.png" alt="基于 PPT 的 favicon 设计"></p>
<p>把图标搞出来，在前面提到的网站上上传，就可以得到一整个图标包了~</p>
<blockquote>
<p>提供下我从 PPT 里搞出图片的步骤供参考：<br>复制-&gt;粘贴成图片-&gt;复制粘贴出来的图片-&gt;用 Snipaste 贴图到桌面上-&gt;保存成文件</p>
</blockquote>
<p>我的博客只要用到里面的 favicon.ico 与 apple-touch-icon.png 就可以了，把它们粘到 source 文件夹下，一刷新——</p>
<blockquote>
<p>我写博客测试的时候不知道为什么还是没有…尝试了重启服务器、重新生成、清除浏览器缓存…<br>但是换个浏览器发现已经可以读取了…</p>
</blockquote>
<blockquote>
<p>有些主题的 favicon 路径是写在主题配置文件中的，可能需要设置主题的 _config.yml 文件。</p>
</blockquote>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180513215000.png" alt="设置完毕的 favicon"></p>
<p>可以看到，无论是标题栏或是书签栏都可以显示 <del>精美的</del> 图标了！<br>但是博客只搭建在本地有什么意思？当然是要放到公网上 <del>接收凌辱</del> 以供大家观阅啦。</p>
<h1 id="传到-GitHub-Pages"><a href="#传到-GitHub-Pages" class="headerlink" title="传到 GitHub Pages"></a>传到 GitHub Pages</h1><p>一般的网站需要部署到服务器上才能访问，而 GitHub 提供了方便的 GitHub Pages 服务，静态的网页只需要部署在该服务上就可以访问了。要做的事情很简单，首先有个 GitHub 帐号，然后创建一个 <github username>.github.io 的仓库（repositories）。</github></p>
<p>然后在博客根目录的 _config.yml 文件中最底部加入：</p>
<figure class="highlight yml"><figcaption><span><root>/_config.yml</root></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="attr">https://github.com/&lt;GitHub</span> <span class="string">Username&gt;/&lt;GitHub</span> <span class="string">Username&gt;.github.io.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>这里的 repo 就是博客的地址了，可以在仓库右上角获取到：</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180518203359.png" alt="在 GitHub 仓库获取 URL"></p>
<p>接下来的部署过程 Hexo 已经设定好了，只需要：</p>
<figure class="highlight shell"><figcaption><span><root></root></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 部署 hexo 博客</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>等命令行里显示 <code>done</code>，就可以在 <github username>.github.io 访问到博客了！</github></p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180518203808.png" alt="Hexo 部署完成"></p>
<blockquote>
<p>可能是我的 git 之前配置过，不需要输入帐号密码，如果遇到此问题可以参照 <a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">这篇文章</a> 进行 SSH key 的设置。</p>
</blockquote>
<p>这就结束了么？不！还记得我一开头说我买了个域名么？这才是正事啊！部署到自己的域名上才更有 <del>装逼</del> 归属感！</p>
<h1 id="个人域名"><a href="#个人域名" class="headerlink" title="个人域名"></a>个人域名</h1><h2 id="域名申请"><a href="#域名申请" class="headerlink" title="域名申请"></a>域名申请</h2><p>虽然我是在申请好域名之后才想起来搞个博客的，但这里还是说一下域名的申请。</p>
<p>买域名其实和其它购物一样，选商家，选商品，交钱，拿货，走人！那么去哪儿可以买到域名呢？个人是在 namesilo.com 买的，另外还有 name.com，godaddy.com，阿里云等等，各家提供的域名本身是相同的，但是价格、服务等可能各不相同，这就要靠自己筛选了。</p>
<blockquote>
<p>我为什么选 namesilo 呢？</p>
<p>首先，国内的服务商都要备案，太麻烦了，就先排除在外。然后就是看各家的评价了，namesilo 会赠送 WHOIS 隐私保护，价格好像也最便宜（价格不能只看首年的，还要看续费价格，可能会差很多），就它了！<br>我为什么要写这段话呢，因为我有一个 namesilo 的优惠码 <code>bbag</code>，新用户首次购买可以少 1 美元，我可以拿到首笔订单 10% 的返利，emmmmm，利害关系就是这些了，使用与否任君决定~</p>
</blockquote>
<blockquote>
<p>什么是 WHOIS？</p>
<p>WHOIS是用来查询互联网中域名的IP以及所有者等信息的传输协议。<br>—— <a href="https://zh.wikipedia.org/zh-cn/WHOIS" target="_blank" rel="noopener">维基百科</a><br>总而言之就是网上直接能查到域名的登记信息，包括申请时填的姓名电话等，而 WHOIS 隐私保护就是域名商提供一个假的 WHOIS 替代，这样别人就不能直接查到登记人了。一般的域名商都会提供 WHOIS 隐私保护服务，具体收费情况就要看各家自己的策略了。</p>
</blockquote>
<p>具体的购买步骤就不详述了，输入你想购买的关键字后查找想要的域名购买即可，一般见得多的后缀有 com, me, io 等等，要注意的是 cn 是中国的国别域名，是一定要备案哒。</p>
<p>那在一通忽悠购买域名后该怎么做才能让它和 GitHub Pages 里的博客关联起来呢？</p>
<h2 id="关联到-GitHub-Pages"><a href="#关联到-GitHub-Pages" class="headerlink" title="关联到 GitHub Pages"></a>关联到 GitHub Pages</h2><p>首先要在域名商处进行 DNS 设置，如果是想设置类似 blog.bbag.me 的二级域名只需设置 CNAME，而类似 bbag.me 的一级域名则需要配置 ALIAS/ANAME/A 记录的一种。</p>
<blockquote>
<p>域名解析到底是干什么的呢，这里给一个 <a href="https://help.aliyun.com/document_detail/29716.html" target="_blank" rel="noopener">阿里云的介绍文档</a><br>简单地可以认为 A 记录用于指向 IP 地址，CNAME 用于指向别的域名，MX 记录用于指向邮件服务器。</p>
</blockquote>
<p>这里我使用的是二级域名，所以只需要设置 CNAME 记录就可以了——<br>在 source 目录下新建一个 <strong>没有后缀名</strong> 的 CNAME 文件，里面填上申请的域名：</p>
<figure class="highlight plain"><figcaption><span>/source/CNAME</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog.bbag.me</span><br></pre></td></tr></table></figure>
<blockquote>
<p>因为我自己是设置的二级域名，所以就没写怎么设置顶级域名了，关于顶级域名的配置可以见 <a href="https://help.github.com/articles/setting-up-an-apex-domain/" target="_blank" rel="noopener">GitHub 的官方说明</a> 或者 <a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">这篇知乎专栏</a>。</p>
</blockquote>
<p>这是为了部署到 GitHub Pages 后让它知道要指向的域名。<br>然后进行部署：</p>
<figure class="highlight shell"><figcaption><span><root></root></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>这时候在 GitHub 仓库的 settings 下应该就可以看到 GitHub Pages 设置成功了！</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180519200714.png" alt="GitHub Pages 指向自定义域名"></p>
<p>但是光 GitHub 知道还不行，还要告诉 DNS 如何解析，如果没有特别指定域名服务器的话就是在域名服务商处进行设置，比如我就是在 namesilo 里设置 CNAME:</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180520224149.png" alt="设置 DNS 解析"></p>
<blockquote>
<p>域名解析可能需要一段时间才能生效…</p>
</blockquote>
<p>再访问下自己的域名——</p>
<p>完美~</p>
<p>不！等等！</p>
<p>为什么别人家的网站都有小绿锁而我的没有？</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180519201154.png" alt="看起来很安全的小绿锁"></p>
<p>不行，我也要小绿锁！</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180519201314.png" alt="我全都要"></p>
<h2 id="设置-HTTPS"><a href="#设置-HTTPS" class="headerlink" title="设置 HTTPS"></a>设置 HTTPS</h2><p>要小绿锁呢当然不是为了好看，是为了安全 <del>和治疗强迫症</del>，自 5 月 1 日起 GitHub Pages 已经支持自定义域名的 HTTPS 设置了，只需要在 GitHub 的 settings 里一点：</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180527193252.png" alt="在 GitHub 中设置强制 HTTPS 访问"></p>
<blockquote>
<p>其实之前是使用 CloudFlare 的服务设置的 HTTPS，但之后看了 <a href="https://nickjanetakis.com/blog/lets-encrypt-vs-cloudflare-for-https" target="_blank" rel="noopener">这篇博文</a>，让我决定还是使用 GitHub Pages 提供的服务。<br>这篇文章主要指出了 CloudFlare 服务的几个缺点：</p>
<ol>
<li>“Flexible SSL” 模式仅仅在用户与 CloudFlare 之间采用加密连接，而 CloudFlare 与原始服务器间仍采用未加密通信；</li>
<li>由于是共享的 SSL 证书，所以查看 SSL 证书时会看到许多无关的域名和我的域名关联在一个证书上。</li>
</ol>
<p>总而言之，既然 GitHub 提供了更好的 HTTPS 服务又为什么不用呢~</p>
</blockquote>
<p>勾选完毕后耐心地等上一段时间（24 小时内）再登上我的博客就可以看到鲜艳的绿锁了！查看一下证书可以看到，GitHub 是与 Let’s Encrypt 合作提供的 SSL 服务：</p>
<p><img src="https://blog-1251731977.cos.ap-beijing.myqcloud.com/20180527195147.png" alt="小绿锁以及证书信息"></p>
<p>但是这里有一点需要注意的，小绿锁只有在全站的内容都是通过 HTTPS 访问才会显示，这就要求了站内的图片等也要走 HTTPS。如果要求不高的话可以选用 <a href="https://chrome.google.com/webstore/detail/%E6%96%B0%E6%B5%AA%E5%BE%AE%E5%8D%9A%E5%9B%BE%E5%BA%8A/fdfdnfpdplfbbnemmmoklbfjbhecpnhf?hl=zh-CN&amp;utm_source=chrome-ntp-launcher" target="_blank" rel="noopener">微博图床</a>，可以将图片传到新浪微博的服务器。</p>
<p>但考虑到这种方式可能利用了微博的某些后门，万一哪天微博心情不好一封了之咱博客的图片可就全挂了。博客还是掌握在自己的手里才安心啊，翻了一圈云服务之后，我决定选 <a href="https://cloud.tencent.com/product/cos" target="_blank" rel="noopener">腾讯云 COS</a> 作为我的坚实后盾。为什么？因为免费啊！每个月 10GB 流量足够我可劲造了。什么？不够怎么办？那说明我火了啊！火了还怕什么资费问题~</p>
<p>这里再推荐一个方便传图的工具：<a href="https://molunerfinn.com/PicGo/" target="_blank" rel="noopener">PicGo</a> 就可以通过快捷键一键传图了~<br>Mac 上有个 <a href="https://itunes.apple.com/cn/app/id1101244278?ls=1&amp;mt=12&amp;at=1000lv4R&amp;ct=iPic_home" target="_blank" rel="noopener">iPic</a> 也是同样功能~</p>
<p>好了，一切准备就绪，终于可以开始写博客了！</p>
<h1 id="撰写博文"><a href="#撰写博文" class="headerlink" title="撰写博文"></a>撰写博文</h1><p>先生成一篇文章：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 生成一篇名为 &lt;title&gt; 的文章</span></span><br><span class="line">hexo new &lt;title&gt;</span><br></pre></td></tr></table></figure>
<p>在 <root>/source/_posts 就可以看到新建的文章了，找个文本编辑器打开它——嗯…嗯？这都是些啥呀：</root></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">hello-world</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-05</span><span class="bullet">-27</span> <span class="number">20</span><span class="string">:16:07</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<p>最顶端用 <code>---</code> 分隔出来的部分叫 Front-matter，是用来告诉 hexo 文章的一些属性的，比如 <code>title</code> 代表文章的标题，<code>date</code> 代表文章创建日期等等，具体有哪些可以在 <a href="https://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="noopener">Hexo 文档</a> 内找到。</p>
<p>在第二个 <code>---</code> 之后就可以泼墨挥毫了，但是，我这篇博客里花花绿绿的格式是什么呢？图片又怎么插入呢？这就需要 Markdown 的支持了。Hexo 支持 <a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="noopener">GitHub Flavored Markdown</a> 的所有功能，使用 Markdown 语法写出的文档可以被正确渲染，比如 <code>**强调**</code> 渲染出的效果就是：<strong>强调</strong>。</p>
<blockquote>
<p>但我试了一下 GitHub 插入 emoji 的语法好像不可以，比如：:thumbsup:<br>这里的「支持所有功能」是 Hexo 官网说的，我就照着写了。<br>当然也可以通过第三方插件支持 emoji，这里就不展开了。</p>
</blockquote>
<p>Markdown 本身就是为文字工作设计的语言，所以不用担心太复杂，只需要照着文档敲一遍基本上就能非常熟练辣。</p>
<p>写完！生成！发布！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 根据 <span class="built_in">source</span> 里的博文生成对应的博客网页</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="meta">#</span><span class="bash"> 部署到线上（GitHub Pages）</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>这回终于完成了吧……连文章都发上去了难道还有什么问题不成？</p>
<p>等等！</p>
<p>怎么没有评论！</p>
<p>不行！我得加上！</p>
<h1 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h1><p>对我这种菜鸡来说写的文章肯定有许多纰漏，要是没有评论的话别人也不能进行指正，误导了更多的人可不好（不，并没有人访问这个博客的）。</p>
<p>评论一般是由主题提供的，比如我使用的 Maupassant 便提供了 disqus, 友言, LiveRe, 畅言, Gitment, Gitalk, Valine 等多个评论系统接入方式，大多数系统只需要在 /themes/maupassant/_config.yml 中填入相应信息即可，但我在选用 Gitment 作为评论系统的时候出了点问题，这里记录一下：</p>
<p>当 Gitment 初始化文章评论时一直失败，查看发送的请求可以看到返回的错误为 <code>Error: validation failed</code>，经过一阵子谷歌后发现，Gitment 是使用 GitHub 的 Issues 存储评论的，并且使用文章地址作为 issue 的 label 进行索引。但是在 GitHub 某版本更新后 label 的长度被限制为 50 字符，所以当文章地址太长时就会出现初始化错误的问题。</p>
<p>既然知道了问题所在，那解决方案也非常简单：使用一个小于 50 字符且不重复的字符串作为文章的 label 即可。一般使用文章的时间即可——毕竟没有人会在同一秒内创建两篇博客吧。</p>
<p>具体地，可以找到 /themes/maupassant/comments.pug 进行修改：</p>
<figure class="highlight js"><figcaption><span>/themes/maupassant/comments.pug</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gitment = <span class="keyword">new</span> Gitment(&#123;</span><br><span class="line">        id: <span class="string">'#&#123;page.date&#125;'</span>, <span class="comment">// 修改这一行，使 id 为文章的日期</span></span><br><span class="line">        owner: <span class="string">'#&#123;theme.gitment.owner&#125;'</span>,</span><br><span class="line">        repo: <span class="string">'#&#123;theme.gitment.repo&#125;'</span>,</span><br><span class="line">        oauth: &#123;</span><br><span class="line">          client_id: <span class="string">'#&#123;theme.gitment.client_id&#125;'</span>,</span><br><span class="line">          client_secret: <span class="string">'#&#123;theme.gitment.client_secret&#125;'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当然，每个主题的修改方式是不一样的，主要是找到 <code>new Gitment</code> 的位置进行修改。</p>
</blockquote>
<h1 id="多设备同步"><a href="#多设备同步" class="headerlink" title="多设备同步"></a>多设备同步</h1><p>平时我会在实验室和宿舍两个地方写博客，但是博客的源码却只在一处，如何保证两处代码都最新呢？</p>
<p>这可以用两个思路进行解决：</p>
<ol>
<li>文件同步，即通过 OneDrive、DropBox 等文件同步工具进行同步。</li>
<li>代码同步，即使用 GitHub 等代码托管平台进行同步。</li>
</ol>
<p>其中文件同步会同步大量 node_modules 内的依赖模块代码（可以通过 <code>npm install</code> 重新安装），所以我选用了第二种代码同步的方法进行同步，毕竟也算是源代码么。<br>具体的流程可以参考：<a href="http://www.mashangxue123.com/Hexo/3611120980.html" target="_blank" rel="noopener">Hexo 多台电脑同步 源码保存 | 马上学123</a></p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>呼呼呼，这篇文章从 5 月 10 日创建，一直到今天（5 月 27 日）才算基本完成（而且越后面越短），看来我的博客之路充满了坎坷啊…</p>
<p>不过如果有帮助到谁的话，哪怕只有一点点，也是非常开心了~</p>
<p>希望我还能产出下一篇博文，不要写完这篇就荒废了（立下 Flag</p>
<h1 id="版本记录"><a href="#版本记录" class="headerlink" title="版本记录"></a>版本记录</h1><p>2018/05/27 完成第一版</p>
</div><div class="tags"><a href="/tags/博客-域名-HTTPS-Hexo/">博客 域名 HTTPS Hexo</a></div><div class="post-nav"><a class="pre" href="/2018/06/16/javascript-event-loop/">Promise 与 JavaScript 的事件循环</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  id: '1525963512000',
  owner: 'oopp1800',
  repo: 'oopp1800.github.io',
  oauth: {
    client_id: 'd0c3824b30919466887a',
    client_secret: 'ecf87270d6bc9c1d61efe585eaaf2bd2fdcdce06',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://blog.bbag.me"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件技巧/">软件技巧</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/博客-域名-HTTPS-Hexo/" style="font-size: 15px;">博客 域名 HTTPS Hexo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/03/31/download-pdf-from-cnki/">从知网（CNKI）下载 PDF 版文献</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/16/javascript-event-loop/">Promise 与 JavaScript 的事件循环</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/first-step-of-blog/">惯例的第一篇：搭建博客，从申请域名到撰写博文</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://jcf94.com/" title="Chenfan Blog" target="_blank">Chenfan Blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">脑袋的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>